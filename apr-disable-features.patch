diff -urN apr-1.3.6.org/configure.in apr-1.3.6/configure.in
--- apr-1.3.6.org/configure.in	2009-07-01 23:43:47.000000000 +0200
+++ apr-1.3.6/configure.in	2009-07-25 22:49:20.170550136 +0200
@@ -779,7 +779,7 @@
 fi
 
 dnl ----------------------------- Checking for extended file descriptor handling
-AC_CHECK_FUNCS(dup3 accept4 epoll_create1)
+dnl AC_CHECK_FUNCS(dup3 accept4 epoll_create1)
 
 AC_CACHE_CHECK([for SOCK_CLOEXEC support], [apr_cv_sock_cloexec],
 [AC_TRY_RUN([
@@ -788,7 +788,7 @@
 
 int main()
 {
-    return socket(AF_INET, SOCK_STREAM|SOCK_CLOEXEC, 0) == -1;
+    return 1;
 }], [apr_cv_sock_cloexec=yes], [apr_cv_sock_cloexec=no], [apr_cv_sock_cloexec=no])])
 
 if test "$apr_cv_sock_cloexec" = "yes"; then
